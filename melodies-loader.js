// Chargeur de mélodies pour Groovy Keys
// Ce fichier charge les mélodies manquantes dans l'application

document.addEventListener('DOMContentLoaded', () => {
    // Attendre que l'objet melodies soit défini
    setTimeout(() => {
        // Vérifier que l'objet melodies existe
        if (typeof melodies === 'undefined') {
            console.error('L\'objet melodies n\'est pas défini');
            return;
        }

        console.log('Chargement des mélodies supplémentaires...');
        console.log('Mélodies existantes:', Object.keys(melodies));

        // Ajouter les mélodies contemporaines
        Object.assign(melodies, {
            shape_of_you: {
                name: "Shape of You (Ed Sheeran)",
                tempo: 96,
                notes: [
                    ['C#5', 200], ['E5', 200], ['F#5', 400], ['C#5', 200], ['E5', 200], ['F#5', 400],
                    ['C#5', 200], ['E5', 200], ['F#5', 200], ['A5', 200], ['F#5', 200], ['E5', 400],
                    ['C#5', 200], ['E5', 200], ['F#5', 400], ['C#5', 200], ['E5', 200], ['F#5', 400],
                    ['C#5', 200], ['E5', 200], ['F#5', 200], ['A5', 200], ['F#5', 200], ['E5', 400]
                ]
            },
            dance_monkey: {
                name: "Dance Monkey (Tones and I)",
                tempo: 98,
                notes: [
                    ['C5', 200], ['D5', 200], ['E5', 400], ['C5', 200], ['D5', 200], ['E5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 200], ['G5', 200], ['E5', 200], ['D5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 400], ['C5', 200], ['D5', 200], ['E5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 200], ['G5', 200], ['E5', 200], ['D5', 400]
                ]
            },
            bad_guy: {
                name: "Bad Guy (Billie Eilish)",
                tempo: 135,
                notes: [
                    ['G4', 200], ['A4', 200], ['B4', 400], ['G4', 200], ['A4', 200], ['B4', 400],
                    ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 200], ['F#4', 200], ['E4', 400],
                    ['G4', 200], ['A4', 200], ['B4', 400], ['G4', 200], ['A4', 200], ['B4', 400],
                    ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 200], ['F#4', 200], ['E4', 400]
                ]
            },
            uptown_funk: {
                name: "Uptown Funk (Bruno Mars)",
                tempo: 115,
                notes: [
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400]
                ]
            },
            shallow: {
                name: "Shallow (Lady Gaga & Bradley Cooper)",
                tempo: 96,
                notes: [
                    ['G4', 400], ['A4', 400], ['C5', 400], ['G4', 400],
                    ['E4', 400], ['G4', 400], ['A4', 800],
                    ['G4', 400], ['A4', 400], ['C5', 400], ['G4', 400],
                    ['E4', 400], ['G4', 400], ['A4', 800],
                    ['C5', 400], ['D5', 400], ['E5', 400], ['D5', 400],
                    ['C5', 400], ['A4', 400], ['G4', 800],
                    ['C5', 400], ['D5', 400], ['E5', 400], ['D5', 400],
                    ['C5', 400], ['A4', 400], ['G4', 800]
                ]
            },
            someone_like_you: {
                name: "Someone Like You (Adele)",
                tempo: 68,
                notes: [
                    ['E4', 400], ['G#4', 400], ['B4', 400], ['E5', 400],
                    ['E4', 400], ['G#4', 400], ['B4', 400], ['E5', 400],
                    ['F#4', 400], ['A4', 400], ['C#5', 400], ['F#5', 400],
                    ['F#4', 400], ['A4', 400], ['C#5', 400], ['F#5', 400],
                    ['G#4', 400], ['B4', 400], ['E5', 400], ['G#5', 400],
                    ['G#4', 400], ['B4', 400], ['E5', 400], ['G#5', 400],
                    ['A4', 400], ['C#5', 400], ['E5', 400], ['A5', 400],
                    ['A4', 400], ['C#5', 400], ['E5', 400], ['A5', 400]
                ]
            },
            perfect: {
                name: "Perfect (Ed Sheeran)",
                tempo: 95,
                notes: [
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['E4', 400], ['G4', 400], ['B4', 400], ['E5', 400],
                    ['E4', 400], ['G4', 400], ['B4', 400], ['E5', 400],
                    ['D4', 400], ['F#4', 400], ['A4', 400], ['D5', 400],
                    ['D4', 400], ['F#4', 400], ['A4', 400], ['D5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400]
                ]
            },
            dont_start_now: {
                name: "Don't Start Now (Dua Lipa)",
                tempo: 124,
                notes: [
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400]
                ]
            },
            havana: {
                name: "Havana (Camila Cabello)",
                tempo: 105,
                notes: [
                    ['E4', 200], ['G4', 200], ['A4', 200], ['C5', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['C5', 200], ['D5', 400],
                    ['E5', 200], ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 400],
                    ['E5', 200], ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['C5', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['C5', 200], ['D5', 400]
                ]
            },
            royals: {
                name: "Royals (Lorde)",
                tempo: 85,
                notes: [
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400]
                ]
            }
        });

        // Ajouter plus de mélodies contemporaines
        Object.assign(melodies, {
            believer: {
                name: "Believer (Imagine Dragons)",
                tempo: 125,
                notes: [
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400]
                ]
            },
            watermelon_sugar: {
                name: "Watermelon Sugar (Harry Styles)",
                tempo: 95,
                notes: [
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E5', 200], ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 400],
                    ['E5', 200], ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400]
                ]
            },
            drivers_license: {
                name: "drivers license (Olivia Rodrigo)",
                tempo: 72,
                notes: [
                    ['F4', 400], ['A4', 400], ['C5', 400], ['F5', 400],
                    ['F4', 400], ['A4', 400], ['C5', 400], ['F5', 400],
                    ['G4', 400], ['Bb4', 400], ['D5', 400], ['G5', 400],
                    ['G4', 400], ['Bb4', 400], ['D5', 400], ['G5', 400],
                    ['A4', 400], ['C5', 400], ['E5', 400], ['A5', 400],
                    ['A4', 400], ['C5', 400], ['E5', 400], ['A5', 400],
                    ['Bb4', 400], ['D5', 400], ['F5', 400], ['Bb5', 400],
                    ['Bb4', 400], ['D5', 400], ['F5', 400], ['Bb5', 400]
                ]
            },
            lovely: {
                name: "lovely (Billie Eilish & Khalid)",
                tempo: 115,
                notes: [
                    ['B4', 400], ['D5', 400], ['F#5', 400], ['B5', 400],
                    ['B4', 400], ['D5', 400], ['F#5', 400], ['B5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['E4', 400], ['G4', 400], ['B4', 400], ['E5', 400],
                    ['E4', 400], ['G4', 400], ['B4', 400], ['E5', 400],
                    ['A4', 400], ['C#5', 400], ['E5', 400], ['A5', 400],
                    ['A4', 400], ['C#5', 400], ['E5', 400], ['A5', 400]
                ]
            },
            stay: {
                name: "Stay (The Kid LAROI & Justin Bieber)",
                tempo: 170,
                notes: [
                    ['C5', 200], ['D5', 200], ['E5', 400], ['C5', 200], ['D5', 200], ['E5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 200], ['G5', 200], ['E5', 200], ['D5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 400], ['C5', 200], ['D5', 200], ['E5', 400],
                    ['C5', 200], ['D5', 200], ['E5', 200], ['G5', 200], ['E5', 200], ['D5', 400]
                ]
            },
            memories: {
                name: "Memories (Maroon 5)",
                tempo: 91,
                notes: [
                    ['C4', 400], ['E4', 400], ['G4', 400], ['C5', 400],
                    ['C4', 400], ['E4', 400], ['G4', 400], ['C5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['G4', 400], ['B4', 400], ['D5', 400], ['G5', 400],
                    ['A4', 400], ['C5', 400], ['E5', 400], ['A5', 400],
                    ['A4', 400], ['C5', 400], ['E5', 400], ['A5', 400],
                    ['F4', 400], ['A4', 400], ['C5', 400], ['F5', 400],
                    ['F4', 400], ['A4', 400], ['C5', 400], ['F5', 400]
                ]
            },
            levitating: {
                name: "Levitating (Dua Lipa)",
                tempo: 103,
                notes: [
                    ['F#4', 200], ['A4', 200], ['B4', 200], ['C#5', 200], ['E5', 400],
                    ['F#4', 200], ['A4', 200], ['B4', 200], ['C#5', 200], ['E5', 400],
                    ['F#5', 200], ['E5', 200], ['C#5', 200], ['B4', 200], ['A4', 400],
                    ['F#5', 200], ['E5', 200], ['C#5', 200], ['B4', 200], ['A4', 400],
                    ['F#4', 200], ['A4', 200], ['B4', 200], ['C#5', 200], ['E5', 400],
                    ['F#4', 200], ['A4', 200], ['B4', 200], ['C#5', 200], ['E5', 400]
                ]
            },
            say_so: {
                name: "Say So (Doja Cat)",
                tempo: 111,
                notes: [
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D5', 200], ['C5', 200], ['A4', 200], ['G4', 200], ['F4', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400],
                    ['D4', 200], ['F4', 200], ['G4', 200], ['A4', 200], ['C5', 400]
                ]
            },
            circles: {
                name: "Circles (Post Malone)",
                tempo: 120,
                notes: [
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E5', 200], ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 400],
                    ['E5', 200], ['D5', 200], ['B4', 200], ['A4', 200], ['G4', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['B4', 200], ['D5', 400]
                ]
            }
        });

        // Ajouter les mélodies Rock restantes
        Object.assign(melodies, {
            hotel_california: {
                name: "Hotel California (Eagles)",
                tempo: 75,
                notes: [
                    // Intro/Solo
                    ['B4', 400], ['D5', 400], ['F#5', 400], ['B4', 400], ['D5', 400], ['F#5', 400],
                    ['A5', 400], ['G5', 400], ['F#5', 400], ['E5', 400], ['D5', 800],
                    // Couplet
                    ['B4', 400], ['C#5', 400], ['D5', 400], ['E5', 400], ['F#5', 800],
                    ['F#5', 400], ['E5', 400], ['D5', 400], ['C#5', 400], ['B4', 800],
                    // Refrain
                    ['G5', 400], ['F#5', 400], ['E5', 400], ['D5', 400], ['C#5', 800],
                    ['A4', 400], ['B4', 400], ['C#5', 400], ['D5', 400], ['E5', 400], ['F#5', 800]
                ]
            },
            back_in_black: {
                name: "Back in Black (AC/DC)",
                tempo: 94,
                notes: [
                    ['E4', 200], ['G4', 200], ['A4', 200], ['E4', 200], ['G4', 200], ['A4', 200], ['E4', 200], ['G4', 200],
                    ['A4', 200], ['A4', 200], ['G4', 200], ['E4', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['E4', 200], ['G4', 200], ['A4', 200], ['E4', 200], ['G4', 200],
                    ['A4', 200], ['A4', 200], ['G4', 200], ['E4', 400],
                    ['D5', 200], ['D5', 200], ['A4', 200], ['G4', 200], ['A4', 200], ['G4', 200], ['E4', 400],
                    ['D5', 200], ['D5', 200], ['A4', 200], ['G4', 200], ['A4', 200], ['G4', 200], ['E4', 400],
                    ['E4', 200], ['G4', 200], ['A4', 200], ['A4', 200], ['G4', 200], ['E4', 400]
                ]
            },
            enter_sandman: {
                name: "Enter Sandman (Metallica)",
                tempo: 123,
                notes: [
                    ['E4', 200], ['F4', 200], ['G4', 200], ['E4', 200], ['F4', 200], ['G4', 200], ['E4', 200], ['F4', 200],
                    ['G4', 200], ['G4', 200], ['F4', 200], ['E4', 400],
                    ['E4', 200], ['F4', 200], ['G4', 200], ['E4', 200], ['F4', 200], ['G4', 200], ['E4', 200], ['F4', 200],
                    ['G4', 200], ['G4', 200], ['F4', 200], ['E4', 400],
                    ['A4', 200], ['A4', 200], ['G4', 200], ['F4', 200], ['G4', 200], ['F4', 200], ['E4', 400],
                    ['A4', 200], ['A4', 200], ['G4', 200], ['F4', 200], ['G4', 200], ['F4', 200], ['E4', 400],
                    ['E4', 200], ['F4', 200], ['G4', 200], ['G4', 200], ['F4', 200], ['E4', 400]
                ]
            },
            smells_teen_spirit: {
                name: "Smells Like Teen Spirit (Nirvana)",
                tempo: 117,
                notes: [
                    // Riff principal
                    ['F4', 200], ['Bb4', 200], ['Ab4', 200], ['Db5', 400],
                    ['F4', 200], ['Bb4', 200], ['Ab4', 200], ['Db5', 400],
                    ['F4', 200], ['Bb4', 200], ['Ab4', 200], ['Db5', 200], ['C5', 200], ['Bb4', 400],
                    // Couplet
                    ['F4', 200], ['Bb4', 200], ['Ab4', 200], ['Gb4', 400], ['F4', 400],
                    ['F4', 200], ['Bb4', 200], ['Ab4', 200], ['Gb4', 400], ['F4', 400],
                    // Refrain
                    ['Bb4', 200], ['C5', 200], ['Db5', 400], ['C5', 200], ['Bb4', 200], ['Ab4', 400],
                    ['Bb4', 200], ['C5', 200], ['Db5', 400], ['C5', 200], ['Bb4', 200], ['Ab4', 400],
                    ['Bb4', 200], ['C5', 200], ['Db5', 200], ['C5', 200], ['Bb4', 200], ['Ab4', 200], ['F4', 600]
                ]
            }
        });

        console.log('Mélodies supplémentaires chargées avec succès!');
        console.log('Vérification des mélodies Say So et Circles:', melodies.say_so ? 'Say So OK' : 'Say So MANQUANT', melodies.circles ? 'Circles OK' : 'Circles MANQUANT');
        console.log('Toutes les mélodies disponibles:', Object.keys(melodies));
    }, 2000); // Augmenter le délai à 2 secondes pour s'assurer que l'objet melodies est défini
});
