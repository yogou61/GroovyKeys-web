<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groovy Keys - Improvisation</title>
    <link rel="icon" href="raccourci.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="logo">
        <img src="logo.png" alt="Groovy Keys Logo">
    </div>

    <nav>
        <a href="index.html">Piano</a>
        <a href="practice.html">Entra√Ænement</a>
        <a href="improvisation.html" class="active">Improvisation</a>
        <a href="learn.html">Apprendre</a>
        <a href="musicfy.html">Musicfy</a>
        <a href="about.html">√† propos</a>
    </nav>

    <div class="practice-controls">
        <div class="practice-layout">
            <div class="practice-left">
                <div class="settings">
                    <div>
                        <label for="practice-scale-type">Gamme:</label>
                        <select id="practice-scale-type" data-control="scale-type" data-no-generate="true">
                            <option value="major">Majeure</option>
                            <option value="minor">Mineure</option>
                            <option value="blues">Blues</option>
                            <option value="lofi">Lo-Fi</option>
                        </select>
                    </div>
                    <div>
                        <label for="practice-scale-root">Tonalit√©:</label>
                        <select id="practice-scale-root" data-control="scale-root" data-no-generate="true">
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                        </select>
                    </div>
                    <div>
                        <label for="progression-length">Longueur:</label>
                        <input type="number" id="progression-length" min="2" max="8" value="4" data-control="length" data-no-generate="true">
                    </div>
                    <div>
                        <label for="tempo-range">Tempo:</label>
                        <select id="tempo-range" data-control="tempo" data-no-generate="true">
                            <option value="slow">Lent (60-80 BPM)</option>
                            <option value="medium" selected>Moyen (80-100 BPM)</option>
                            <option value="fast">Rapide (100-120 BPM)</option>
                            <option value="pro">Pro (120-140 BPM)</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button id="generate-progression" data-action="generate">G√©n√©rer</button>
                        <button id="show-progress" data-action="progress">Progr√®s</button>
                    </div>
                </div>

                <div id="metronome">
                    <div class="beat-dots">
                        <div class="beat-dot"></div>
                        <div class="beat-dot"></div>
                        <div class="beat-dot"></div>
                        <div class="beat-dot"></div>
                    </div>
                    <div id="bpm-display">BPM: <span id="bpm-value">90</span></div>
                </div>

                <div class="practice-stats">
                    <div id="accuracy">R√©ussis: 0/0</div>
                    <div id="streak">S√©rie: 0</div>
                    <div id="speed-score">Score: 0</div>
                    <button id="reset-stats" data-action="reset">Reset</button>
                </div>
            </div>

            <div class="practice-right">
                <div class="progression-display">
                    <div id="chord-sequence">Notes √† jouer</div>
                    <div id="current-chord">Note actuelle</div>
                </div>
                <div id="piano"></div>
                
                <div class="impro-guide">
                    <h3>Guide d'improvisation</h3>
                    <div class="impro-tabs">
                        <button class="impro-tab active" data-tab="tips">Astuces</button>
                        <button class="impro-tab" data-tab="emotions">Expressivit√©</button>
                        <button class="impro-tab" data-tab="motifs">M√©lodies</button>
                        <button class="impro-tab" data-tab="patterns">Motifs</button>
                    </div>
                    
                    <div class="impro-content">
                        <div class="impro-tab-content active" id="tips-content">
                            <h4>Astuces pour bien improviser</h4>
                            <ul>
                                <li><strong>Commencez lentement</strong> - Ma√Ætrisez d'abord les notes √† un tempo r√©duit</li>
                                <li><strong>√âcoutez le rythme</strong> - Restez synchronis√© avec le m√©tronome</li>
                                <li><strong>Exp√©rimentez</strong> - Essayez diff√©rentes combinaisons de notes</li>
                                <li><strong>R√©p√©tez des motifs</strong> - Cr√©ez des phrases musicales en r√©p√©tant des motifs</li>
                                <li><strong>Utilisez le silence</strong> - Les pauses sont aussi importantes que les notes</li>
                            </ul>
                        </div>
                        
                        <div class="impro-tab-content" id="emotions-content">
                            <h4>L'art d'exprimer des √©motions</h4>
                            <p class="intro-text">L'improvisation ne consiste pas seulement √† jouer les bonnes notes, mais aussi √† transmettre des √©motions. Explorez comment cr√©er diff√©rentes ambiances √† travers votre jeu.</p>
                            
                            <div class="emotion-grid">
                                <div class="emotion-card">
                                    <h5>Joie et L√©g√®ret√©</h5>
                                    <div class="emotion-icon">üòä</div>
                                    <ul class="emotion-tips">
                                        <li>Utilisez des tempos rapides (100-140 BPM)</li>
                                        <li>Jouez dans des tonalit√©s majeures</li>
                                        <li>Favorisez les notes aigu√´s et les rythmes sautillants</li>
                                        <li>Utilisez des motifs ascendants qui se terminent sur des notes fortes</li>
                                        <li>Ajoutez de courts silences pour cr√©er de l'anticipation</li>
                                    </ul>
                                    <div class="emotion-example">Exemple : Jouez des phrases courtes et rapides qui montent vers les aigus, avec des rythmes point√©s et des accents sur les temps forts.</div>
                                </div>
                                
                                <div class="emotion-card">
                                    <h5>M√©lancolie et Nostalgie</h5>
                                    <div class="emotion-icon">üòî</div>
                                    <ul class="emotion-tips">
                                        <li>Optez pour des tempos lents (60-80 BPM)</li>
                                        <li>Pr√©f√©rez les tonalit√©s mineures</li>
                                        <li>Utilisez des notes tenues et des lignes descendantes</li>
                                        <li>Explorez les registres graves du piano</li>
                                        <li>Introduisez des dissonances subtiles pour la tension</li>
                                    </ul>
                                    <div class="emotion-example">Exemple : Cr√©ez des phrases lentes qui descendent progressivement, avec des notes qui se chevauchent et quelques silences prolong√©s.</div>
                                </div>
                                
                                <div class="emotion-card">
                                    <h5>Tension et Dramatisme</h5>
                                    <div class="emotion-icon">üò¨</div>
                                    <ul class="emotion-tips">
                                        <li>Alternez entre tempos lents et acc√©l√©rations</li>
                                        <li>Utilisez des intervalles de triton (quarte augment√©e)</li>
                                        <li>Incorporez des notes chromatiques et des dissonances</li>
                                        <li>Contrastez les dynamiques (fort/doux)</li>
                                        <li>Construisez progressivement l'intensit√©</li>
                                    </ul>
                                    <div class="emotion-example">Exemple : D√©butez doucement dans le grave, augmentez graduellement le volume et la densit√© des notes, culminez avec des accords forts, puis revenez au calme.</div>
                                </div>
                                
                                <div class="emotion-card">
                                    <h5>Calme et S√©r√©nit√©</h5>
                                    <div class="emotion-icon">üòå</div>
                                    <ul class="emotion-tips">
                                        <li>Adoptez un tempo m√©ditatif (70-90 BPM)</li>
                                        <li>Utilisez des accords ouverts et arpeg√©s</li>
                                        <li>Privil√©giez les intervalles consonants (tierces, quintes)</li>
                                        <li>Laissez de l'espace entre les phrases musicales</li>
                                        <li>Maintenez une dynamique douce et √©gale</li>
                                    </ul>
                                    <div class="emotion-example">Exemple : Jouez des arpeg√©s lents et fluides, en laissant chaque note r√©sonner. Ajoutez des m√©lodies simples par-dessus, sans pr√©cipitation.</div>
                                </div>
                            </div>
                            
                            <div class="emotion-practice">
                                <h5>Comment s'exercer</h5>
                                <ol>
                                    <li><strong>Visualisation</strong> : Avant de jouer, imaginez une sc√®ne ou un souvenir li√© √† l'√©motion cible</li>
                                    <li><strong>Expressivit√© corporelle</strong> : Laissez votre corps exprimer l'√©motion pendant que vous jouez</li>
                                    <li><strong>Dynamique</strong> : Variez l'intensit√© (fort/doux) pour renforcer l'expression √©motionnelle</li>
                                    <li><strong>√âcoute active</strong> : Analysez comment les grands musiciens transmettent des √©motions</li>
                                </ol>
                            </div>
                        </div>
                        
                        <div class="impro-tab-content" id="motifs-content">
                            <h4>L'art des m√©lodies courtes (Licks & Motifs)</h4>
                            <p class="intro-text">Les m√©lodies courtes de 5 √† 9 notes, souvent appel√©es <strong>licks</strong>, <strong>motifs</strong> ou <strong>cellules m√©lodiques</strong>, sont les blocs de construction fondamentaux de l'improvisation. Comme des phrases dans le langage, elles permettent d'exprimer des id√©es musicales concises et m√©morables.</p>
                            
                            <div class="motif-importance">
                                <h5>Pourquoi utiliser des motifs courts ?</h5>
                                <div class="advantages">
                                    <div class="advantage-item">
                                        <div class="advantage-icon">üïí</div>
                                        <div class="advantage-text">
                                            <strong>M√©morisation facile</strong>
                                            <p>Plus faciles √† retenir et √† reproduire que de longues s√©quences, menant √† une m√©moire musculaire plus rapide.</p>
                                        </div>
                                    </div>
                                    <div class="advantage-item">
                                        <div class="advantage-icon">üéµ</div>
                                        <div class="advantage-text">
                                            <strong>Motifs reconnaissables</strong>
                                            <p>Cr√©ent des "signatures sonores" que l'auditeur peut identifier et suivre tout au long du morceau.</p>
                                        </div>
                                    </div>
                                    <div class="advantage-item">
                                        <div class="advantage-icon">üîÑ</div>
                                        <div class="advantage-text">
                                            <strong>Versatilit√©</strong>
                                            <p>Peuvent √™tre transpos√©s, invers√©s, √©tir√©s ou compress√©s pour cr√©er de nombreuses variations.</p>
                                        </div>
                                    </div>
                                    <div class="advantage-item">
                                        <div class="advantage-icon">üí°</div>
                                        <div class="advantage-text">
                                            <strong>Clart√© d'expression</strong>
                                            <p>Comme un bon discours, des phrases courtes et incisives ont plus d'impact que de longs monologues.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="lick-examples">
                                <h5>Exemples de licks/motifs classiques</h5>
                                <div class="lick-collection">
                                    <div class="lick-item">
                                        <h6>Motif Blues Simple</h6>
                                        <div class="lick-notation">
                                            <span class="note">Do</span>
                                            <span class="note">Mib</span>
                                            <span class="note">Fa</span>
                                            <span class="note">Fa#</span>
                                            <span class="note">Fa</span>
                                            <span class="note">Mib</span>
                                            <span class="note">Do</span>
                                        </div>
                                        <p>Ce lick blues utilise la note bleue (Fa#) pour cr√©er une tension caract√©ristique.</p>
                                    </div>
                                    <div class="lick-item">
                                        <h6>Motif Pentatonique</h6>
                                        <div class="lick-notation">
                                            <span class="note">Sol</span>
                                            <span class="note">La</span>
                                            <span class="note">Do</span>
                                            <span class="note">R√©</span>
                                            <span class="note">Mi</span>
                                            <span class="note">R√©</span>
                                            <span class="note">Do</span>
                                        </div>
                                        <p>Motif classique de rock bas√© sur la gamme pentatonique majeure.</p>
                                    </div>
                                    <div class="lick-item">
                                        <h6>Motif Jazz (II-V-I)</h6>
                                        <div class="lick-notation">
                                            <span class="note">R√©</span>
                                            <span class="note">Fa</span>
                                            <span class="note">La</span>
                                            <span class="note">Si</span>
                                            <span class="note">R√©</span>
                                            <span class="note">Do</span>
                                        </div>
                                        <p>Ce lick jazz couvre efficacement une progression d'accords II-V-I.</p>
                                    </div>
                                    <div class="lick-item">
                                        <h6>Motif Latin/Bossa</h6>
                                        <div class="lick-notation">
                                            <span class="note">Mi</span>
                                            <span class="note">Fa</span>
                                            <span class="note">Sol</span>
                                            <span class="note">La</span>
                                            <span class="note">Sol</span>
                                            <span class="note">Mi</span>
                                            <span class="note">R√©</span>
                                            <span class="note">Do</span>
                                        </div>
                                        <p>Phrase m√©lodique descendante avec rythme syncop√© typique des musiques latines.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="motif-techniques">
                                <h5>Techniques de d√©veloppement</h5>
                                <div class="technique-grid">
                                    <div class="technique-card">
                                        <h6>R√©p√©tition</h6>
                                        <p>R√©p√©tez le m√™me motif plusieurs fois pour cr√©er une structure stable que l'auditeur peut suivre.</p>
                                        <div class="technique-example">Exemple: Motif ‚Üí Motif ‚Üí Motif</div>
                                    </div>
                                    <div class="technique-card">
                                        <h6>S√©quence</h6>
                                        <p>R√©p√©tez le motif en commen√ßant sur diff√©rentes notes de la gamme (transposition).</p>
                                        <div class="technique-example">Exemple: Do-Mi-Sol ‚Üí R√©-Fa-La ‚Üí Mi-Sol-Si</div>
                                    </div>
                                    <div class="technique-card">
                                        <h6>Inversion</h6>
                                        <p>Jouez le motif √† l'envers, transformant les intervalles ascendants en descendants et vice-versa.</p>
                                        <div class="technique-example">Exemple: Do-Mi-Sol ‚Üí Sol-Mi-Do</div>
                                    </div>
                                    <div class="technique-card">
                                        <h6>Augmentation/Diminution</h6>
                                        <p>Jouez le motif en doublant ou en divisant par deux la dur√©e des notes.</p>
                                        <div class="technique-example">Exemple: Do‚ô™Mi‚ô™Sol‚ô™ ‚Üí Do‚ô©Mi‚ô©Sol‚ô©</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="practice-method">
                                <h5>M√©thode d'apprentissage</h5>
                                <ol>
                                    <li><strong>Collectionnez</strong> des motifs que vous aimez en les notant ou en les enregistrant</li>
                                    <li><strong>Pratiquez</strong> chaque motif dans diff√©rentes tonalit√©s</li>
                                    <li><strong>Combinez</strong> plusieurs motifs pour cr√©er des phrases plus longues</li>
                                    <li><strong>Personnalisez</strong> les motifs en ajoutant votre propre touche (rythme, notes, dynamique)</li>
                                    <li><strong>Contextualisez</strong> en appliquant les motifs sur des morceaux r√©els</li>
                                </ol>
                                <blockquote class="quote">
                                    "Les grands improvisateurs ne sont pas ceux qui inventent tout √† chaque instant, mais ceux qui manipulent habilement un vocabulaire de motifs qu'ils ont d√©velopp√© au fil du temps."
                                </blockquote>
                            </div>
                        </div>
                        
                        <div class="impro-tab-content" id="patterns-content">
                            <h4>Motifs d'improvisation</h4>
                            <div class="pattern-examples">
                                <div class="pattern">
                                    <h5>Mont√©e-Descente</h5>
                                    <p>Jouez les notes de la gamme en montant puis en descendant</p>
                                    <div class="pattern-visual">‚ñÅ‚ñÇ‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá‚ñà‚ñá‚ñÜ‚ñÖ‚ñÑ‚ñÉ‚ñÇ‚ñÅ</div>
                                    <div class="pattern-details">
                                        <p><strong>Comment pratiquer :</strong></p>
                                        <ol>
                                            <li>Commencez par la tonique (premi√®re note de la gamme)</li>
                                            <li>Jouez chaque note jusqu'√† l'octave sup√©rieure</li>
                                            <li>Redescendez note par note jusqu'√† la tonique</li>
                                            <li>Variez le rythme : jouez deux notes par temps, puis trois, etc.</li>
                                        </ol>
                                        <p><strong>Objectif :</strong> D√©velopper la fluidit√© et m√©moriser la gamme physiquement. Ce motif est la base pour acqu√©rir l'aisance digitale n√©cessaire √† l'improvisation.</p>
                                    </div>
                                </div>
                                <div class="pattern">
                                    <h5>Arp√®ge</h5>
                                    <p>Jouez les notes 1-3-5 de la gamme en montant et descendant</p>
                                    <div class="pattern-visual">‚ñÅ‚ñÖ‚ñà‚ñÖ‚ñÅ</div>
                                    <div class="pattern-details">
                                        <p><strong>Comment pratiquer :</strong></p>
                                        <ol>
                                            <li>Reprenez les notes 1 (tonique), 3 (tierce) et 5 (quinte) de la gamme</li>
                                            <li>Jouez-les successivement en montant puis descendant</li>
                                            <li>Essayez plusieurs octaves cons√©cutives</li>
                                            <li>Inversez l'ordre pour cr√©er des variations (5-3-1, 3-1-5, etc.)</li>
                                        </ol>
                                        <p><strong>Application:</strong> Ce motif correspond aux notes principales des accords. Le ma√Ætriser permet d'improviser sur n'importe quelle progression harmonique en suivant les notes essentielles.</p>
                                    </div>
                                </div>
                                <div class="pattern">
                                    <h5>Question-R√©ponse</h5>
                                    <p>Cr√©ez une phrase musicale puis r√©pondez-y avec une variation</p>
                                    <div class="pattern-visual">‚ñÅ‚ñÉ‚ñÇ‚ñÑ‚ñÉ‚ñÅ ‚Üí ‚ñÅ‚ñÉ‚ñÖ‚ñÑ‚ñÉ‚ñÅ</div>
                                    <div class="pattern-details">
                                        <p><strong>Comment pratiquer :</strong></p>
                                        <ol>
                                            <li>Jouez une phrase simple de 4-5 notes (la question)</li>
                                            <li>Reprenez-la en modifiant une ou deux notes (la r√©ponse)</li>
                                            <li>Gardez la m√™me structure rythmique mais changez les hauteurs</li>
                                            <li>Alternez entre phrases conclusives et phrases ouvertes</li>
                                        </ol>
                                        <p><strong>Concept musical :</strong> Ce motif reproduit la structure de conversation en musique. Il cr√©e une narration et donne l'impression d'un dialogue, ajoutant de la coh√©rence et un sens d'√©volution √† votre improvisation.</p>
                                    </div>
                                </div>
                                <div class="pattern">
                                    <h5>Rythme syncop√©</h5>
                                    <p>Accentuez les temps faibles pour cr√©er du groove</p>
                                    <div class="pattern-visual">‚ñÅ‚ñÖ‚ñÅ‚ñÉ‚ñÅ‚ñÖ‚ñÅ‚ñÉ</div>
                                    <div class="pattern-details">
                                        <p><strong>Comment pratiquer :</strong></p>
                                        <ol>
                                            <li>Marquez le temps avec votre pied (1-2-3-4)</li>
                                            <li>Jouez entre les temps (sur les "et")</li>
                                            <li>Accentuez les notes sur les temps faibles (2 et 4)</li>
                                            <li>Combinez avec des silences strat√©giques pour cr√©er de la tension</li>
                                        </ol>
                                        <p><strong>Importance :</strong> La syncope est essentielle dans le jazz, funk et autres genres modernes. Ce d√©calage rythmique cr√©e une tension qui donne vie √† votre musique, la rendant plus dynamique et engageante pour l'auditeur.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour les progr√®s -->
    <div id="progress-modal" class="modal">
        <div class="modal-content">
            <span class="close" data-action="close-modal">&times;</span>
            <h2>Mes Progr√®s</h2>
            <div class="progress-filters">
                <button class="period-btn active" data-period="week" data-action="period">7 jours</button>
                <button class="period-btn" data-period="month" data-action="period">30 jours</button>
                <button class="period-btn" data-period="sixMonths" data-action="period">6 mois</button>
                <button class="period-btn" data-period="year" data-action="period">1 an</button>
            </div>
            <div class="chart-container">
                <canvas id="progress-chart"></canvas>
            </div>
            <div class="stats-summary">
                <div class="stat-box">
                    <h3>Score Moyen</h3>
                    <p id="avg-score">-</p>
                </div>
                <div class="stat-box">
                    <h3>Meilleur Score</h3>
                    <p id="best-score">-</p>
                </div>
                <div class="stat-box">
                    <h3>Sessions</h3>
                    <p id="total-sessions">-</p>
                </div>
            </div>
            <div class="data-controls">
                <button class="data-btn" id="export-data" data-action="export">Exporter</button>
                <button class="data-btn" id="import-data" data-action="import">Importer</button>
                <input type="file" id="import-file" accept=".json" style="display: none;">
            </div>
        </div>
    </div>

    <!-- Script de pr√©vention d'√©v√©nements -->
    <script>
        // Emp√™cher la propagation des √©v√©nements pour les contr√¥les
        document.addEventListener('DOMContentLoaded', function() {
            // Bloquer les √©v√©nements des contr√¥les qui ne doivent pas d√©clencher de g√©n√©ration
            const noGenerateControls = document.querySelectorAll('[data-no-generate="true"]');
            noGenerateControls.forEach(control => {
                control.addEventListener('change', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    console.log('Contr√¥le modifi√© sans g√©n√©ration:', control.id);
                    
                    // Si c'est le tempo, mettre √† jour le BPM
                    if (control.id === 'tempo-range' && window.updateTempoOnly) {
                        window.updateTempoOnly(control.value);
                    }
                });
                
                // Emp√™cher aussi les √©v√©nements de focus/blur/click
                ['focus', 'blur', 'click'].forEach(event => {
                    control.addEventListener(event, function(e) {
                        e.stopPropagation();
                    });
                });
            });
            
            // Configurer les boutons d'action avec leurs propres gestionnaires
            const actionButtons = document.querySelectorAll('[data-action]');
            actionButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    
                    const action = button.getAttribute('data-action');
                    console.log('Action d√©clench√©e:', action);
                    
                    // Ex√©cuter l'action correspondante
                    switch(action) {
                        case 'generate':
                            if (window.generateNoteSequence) window.generateNoteSequence();
                            break;
                        case 'reset':
                            if (window.resetStats) window.resetStats();
                            break;
                        case 'progress':
                            const modal = document.getElementById('progress-modal');
                            if (modal) modal.style.display = 'block';
                            if (window.updateChart) window.updateChart('week');
                            break;
                        case 'close-modal':
                            const closeModal = document.getElementById('progress-modal');
                            if (closeModal) closeModal.style.display = 'none';
                            break;
                        case 'period':
                            const period = button.getAttribute('data-period');
                            document.querySelectorAll('.period-btn').forEach(btn => {
                                btn.classList.remove('active');
                            });
                            button.classList.add('active');
                            if (window.updateChart && period) window.updateChart(period);
                            break;
                        case 'export':
                            if (window.exportData) window.exportData();
                            break;
                        case 'import':
                            document.getElementById('import-file').click();
                            break;
                    }
                });
            });
            
            // Gestionnaire de clic externe pour la modale
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('progress-modal');
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            console.log('Protection anti-conflits install√©e avec succ√®s');
        });
    </script>
    
    <!-- Ajouter une fonction pour mettre √† jour le tempo sans g√©n√©rer -->
    <script>
        window.updateTempoOnly = function(tempoValue) {
            if (typeof generateRandomBPM !== 'function') return;
            
            const bpmValue = document.getElementById('bpm-value');
            const newBPM = generateRandomBPM(tempoValue);
            
            if (window.currentBPM) window.currentBPM = newBPM;
            if (bpmValue) bpmValue.textContent = newBPM;
            
            // Mettre √† jour le m√©tronome si n√©cessaire
            if (window.metronomeInterval && typeof toggleMetronome === 'function') {
                toggleMetronome(false); // Arr√™ter
                toggleMetronome(true);  // Red√©marrer avec le nouveau BPM
            }
            
            console.log('Tempo mis √† jour sans r√©g√©n√©ration:', newBPM);
        };
    </script>

    <!-- Script pour g√©rer les onglets du guide d'improvisation -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion des onglets du guide d'improvisation
            const improTabs = document.querySelectorAll('.impro-tab');
            const tabContents = document.querySelectorAll('.impro-tab-content');
            
            improTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Retirer la classe active de tous les onglets
                    improTabs.forEach(t => t.classList.remove('active'));
                    
                    // Ajouter la classe active √† l'onglet cliqu√©
                    tab.classList.add('active');
                    
                    // Cacher tous les contenus
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Afficher le contenu correspondant √† l'onglet
                    const tabId = tab.getAttribute('data-tab');
                    const targetContent = document.getElementById(tabId + '-content');
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });
            
            console.log('Gestion des onglets du guide d\'improvisation initialis√©e');
        });
    </script>
    
    <!-- Charger les scripts dans cet ordre pr√©cis -->
    <script src="script.js"></script>
    <script src="improvisation.js"></script>
</body>
</html>
